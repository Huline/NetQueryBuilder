<UserControl x:Class="NetQueryBuilder.WPF.Controls.QueryResultGrid"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:converters="clr-namespace:NetQueryBuilder.WPF.Converters">
    <UserControl.Resources>
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <converters:BooleanToVisibilityConverter x:Key="InvertedBooleanToVisibilityConverter" Invert="True"/>
    </UserControl.Resources>

    <Border BorderBrush="#E0E0E0" BorderThickness="1" Background="White" Padding="16" CornerRadius="4">
        <Grid>
            <!-- Empty State -->
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center"
                       Visibility="{Binding HasResults, Converter={StaticResource InvertedBooleanToVisibilityConverter}}">
                <Path Data="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"
                      Fill="#BDBDBD"
                      Stretch="Uniform"
                      Width="64" Height="64"
                      Margin="0,0,0,16"/>
                <TextBlock Text="No Results" FontSize="20" FontWeight="Bold" Foreground="#757575" Margin="0,0,0,8"/>
                <TextBlock Text="Execute a query to see results here" Foreground="#BDBDBD"/>
            </StackPanel>

            <!-- Results Content -->
            <Grid Visibility="{Binding HasResults, Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header with result count -->
                <Border Grid.Row="0" Background="#F5F5F5" Padding="12,8" Margin="0,0,0,12" CornerRadius="4">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontSize="18" FontWeight="Bold" Foreground="#1976D2">
                            <Run Text="{Binding TotalItems, Mode=OneWay}"/>
                        </TextBlock>
                        <TextBlock Text=" results found" FontSize="14" VerticalAlignment="Center" Margin="4,0,0,0"/>
                        <TextBlock Margin="16,0,0,0" VerticalAlignment="Center">
                            <Run Text="Page"/>
                            <Run Text="{Binding CurrentPage, Mode=OneWay}" FontWeight="Bold"/>
                            <Run Text="of"/>
                            <Run Text="{Binding TotalPages, Mode=OneWay}" FontWeight="Bold"/>
                        </TextBlock>
                    </StackPanel>
                </Border>

                <!-- DataGrid -->
                <DataGrid Grid.Row="1"
                         ItemsSource="{Binding Items}"
                         AutoGenerateColumns="True"
                         IsReadOnly="True"
                         CanUserAddRows="False"
                         CanUserDeleteRows="False"
                         CanUserReorderColumns="True"
                         CanUserResizeColumns="True"
                         CanUserSortColumns="True"
                         GridLinesVisibility="Horizontal"
                         HeadersVisibility="Column"
                         AlternatingRowBackground="#F9F9F9"
                         RowBackground="White"
                         SelectionMode="Single">
                    <DataGrid.ColumnHeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="#1976D2"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Setter Property="Padding" Value="12,8"/>
                            <Setter Property="BorderThickness" Value="0,0,1,0"/>
                            <Setter Property="BorderBrush" Value="#1565C0"/>
                        </Style>
                    </DataGrid.ColumnHeaderStyle>
                    <DataGrid.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="Padding" Value="12,8"/>
                            <Setter Property="BorderThickness" Value="0"/>
                        </Style>
                    </DataGrid.CellStyle>
                </DataGrid>

                <!-- Pagination Controls -->
                <Border Grid.Row="2" Background="#F5F5F5" Padding="12" Margin="0,12,0,0" CornerRadius="4">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Content="First"
                               Command="{Binding GoToFirstPageCommand}"
                               Style="{StaticResource PaginationButtonStyle}"
                               Margin="0,0,4,0"/>
                        <Button Content="Previous"
                               Command="{Binding GoToPreviousPageCommand}"
                               Style="{StaticResource PaginationButtonStyle}"
                               Margin="0,0,4,0"/>
                        <TextBlock VerticalAlignment="Center" Margin="12,0">
                            <Run Text="Page"/>
                            <Run Text="{Binding CurrentPage, Mode=OneWay}" FontWeight="Bold"/>
                            <Run Text="of"/>
                            <Run Text="{Binding TotalPages, Mode=OneWay}" FontWeight="Bold"/>
                        </TextBlock>
                        <Button Content="Next"
                               Command="{Binding GoToNextPageCommand}"
                               Style="{StaticResource PaginationButtonStyle}"
                               Margin="4,0"/>
                        <Button Content="Last"
                               Command="{Binding GoToLastPageCommand}"
                               Style="{StaticResource PaginationButtonStyle}"
                               Margin="4,0,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </Border>
</UserControl>
