<UserControl x:Class="NetQueryBuilder.WPF.Controls.QueryBuilderContainer"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:NetQueryBuilder.WPF.Controls">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" MinHeight="200" />
            <RowDefinition Height="Auto" MinHeight="300" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#1976D2" Padding="24,16" CornerRadius="8,8,0,0" Margin="0,0,0,0">
            <StackPanel Orientation="Horizontal">
                <Path Data="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"
                      Fill="White"
                      Stretch="Uniform"
                      Width="32" Height="32"
                      Margin="0,0,16,0" />
                <StackPanel>
                    <TextBlock Text="Query Builder" FontSize="24" FontWeight="Bold" Foreground="White" />
                    <TextBlock Text="Build and execute dynamic queries with visual interface"
                               FontSize="12"
                               Foreground="#E3F2FD" />
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Entity Selection -->
        <Border Grid.Row="1" Background="White" BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" Padding="24,16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="0,0,16,0">
                    <Path Data="M10 4H4c-1.11 0-2 .89-2 2v3h2V6h4V4zm6 0v2h4v3h2V6c0-1.11-.89-2-2-2h-4zm-6 15H4v-3H2v3c0 1.11.89 2 2 2h4v-2zm6 0v2h4c1.11 0 2-.89 2-2v-3h-2v3h-4z"
                          Fill="#1976D2"
                          Stretch="Uniform"
                          Width="24" Height="24"
                          Margin="0,0,12,0" />
                    <TextBlock Text="Data Source" FontSize="14" FontWeight="Bold" VerticalAlignment="Center" />
                </StackPanel>

                <ComboBox Grid.Column="1"
                          ItemsSource="{Binding AvailableEntities}"
                          SelectedItem="{Binding SelectedEntityType, Mode=TwoWay}"
                          DisplayMemberPath="Name"
                          FontSize="14"
                          Padding="12,8"
                          MinWidth="200" />

                <Button Grid.Column="2"
                        Command="{Binding NewQueryCommand}"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Margin="16,0,0,0">
                    <StackPanel Orientation="Horizontal">
                        <Path Data="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"
                              Fill="White"
                              Stretch="Uniform"
                              Width="16" Height="16"
                              Margin="0,0,8,0" />
                        <TextBlock Text="New Query" VerticalAlignment="Center" />
                    </StackPanel>
                </Button>
            </Grid>
        </Border>

        <!-- Query Builder Section -->
        <Border Grid.Row="2" Background="#F5F5F5" Padding="0,16" Margin="0,0,0,16">
            <ContentControl x:Name="QueryBuilderHost" />
        </Border>

        <!-- Results Section -->
        <Border Grid.Row="3">
            <local:QueryResultGrid x:Name="ResultsGrid" />
        </Border>
    </Grid>
</UserControl>