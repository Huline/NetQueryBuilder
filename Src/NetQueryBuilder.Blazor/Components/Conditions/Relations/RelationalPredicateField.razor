@using NetQueryBuilder.Conditions
@using NetQueryBuilder.Queries
<MudSelect Label="Field" T="PropertyPath" ValueChanged="OnFieldSelected" Value="_selectedPropertyName">
    @foreach (var property in _properties)
    {
        <MudSelectItem Value="@property">
            @property.PropertyName
        </MudSelectItem>
    }
</MudSelect>

@code {

    [CascadingParameter] public IQuery Query { get; set; }
    [Parameter] public SimpleCondition Condition { get; set; }

    private PropertyPath _selectedPropertyName;
    private IEnumerable<PropertyPath> _properties = new List<PropertyPath>();

    protected override async Task OnInitializedAsync()
    {
        _properties = Query.AvailableProperties();
        _selectedPropertyName = Condition.PropertyPath;
        await base.OnInitializedAsync();
    }

    private void OnFieldSelected(PropertyPath propertyName)
    {
        _selectedPropertyName = propertyName;
        Condition.PropertyPath = propertyName;
    }

}